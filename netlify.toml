# Netlify 배포 설정 파일
# 이 파일은 Netlify의 빌드 및 배포 동작을 제어합니다.

[build]
  # 빌드 명령어
  command = "npm run build"
  # 배포할 디렉토리 (Vite의 기본 출력 폴더)
  publish = "dist"

# SPA(Single Page Application) 라우팅 설정
# 모든 요청을 index.html로 리다이렉트하여 React Router가 작동하도록 함
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# index.html 캐시 방지 설정
# HTML 파일은 항상 최신 버전을 가져오도록 캐시하지 않음
[[headers]]
  for = "/index.html"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"
    Pragma = "no-cache"
    Expires = "0"

# 정적 에셋(JS, CSS, 이미지 등) 장기 캐시 설정
# Vite가 파일명에 해시를 추가하므로 안전하게 장기 캐시 가능
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# 기타 정적 파일들 (폰트, 이미지 등)
[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
